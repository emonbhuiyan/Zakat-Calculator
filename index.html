<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zakat Calculator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/YOUR_FA_KEY.js" crossorigin="anonymous"></script>
    <style>
        body { padding-bottom: 20px; background: #f8f9fa; }
        .list-group-item { display: flex; justify-content: space-between; align-items: center; }
        .entry-area, .list-area { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="container">

    <h2 class="mt-3 text-center"><i class="fas fa-calculator"></i> Zakat Calculator</h2>

    <!-- Main Currency Selection -->
    <div class="mb-3">
        <label for="mainCurrency" class="form-label"><i class="fas fa-money-bill-wave"></i> Main Currency:</label>
        <select id="mainCurrency" class="form-select">
            <option value="USD">USD - US Dollar</option>
            <option value="EGP">EGP - Egyptian Pound</option>
            <option value="BDT">BDT - Bangladeshi Taka</option>
        </select>
    </div>

    <!-- Asset Entry -->
    <div class="entry-area mb-4">
        <h4><i class="fas fa-wallet"></i> Add Cash/Asset</h4>
        <div class="input-group">
            <input type="text" id="assetType" class="form-control" placeholder="Asset Type (e.g., Savings)">
            <input type="number" id="assetAmount" class="form-control" placeholder="Amount">
            <select id="assetCurrency" class="form-select">
                <option value="USD">USD</option>
                <option value="EGP">EGP</option>
                <option value="BDT">BDT</option>
            </select>
            <button class="btn btn-success" onclick="addAsset()"><i class="fas fa-plus-circle"></i> Add</button>
        </div>
    </div>

    <!-- Gold Entry -->
    <div class="entry-area mb-4">
        <h4><i class="fas fa-ring"></i> Add Gold</h4>
        <div class="input-group">
            <input type="number" id="goldWeight" class="form-control" placeholder="Weight in grams">
            <select id="goldCarat" class="form-select">
                <option value="24">24K</option>
                <option value="22">22K</option>
                <option value="18">18K</option>
            </select>
            <button class="btn btn-warning" onclick="addGold()"><i class="fas fa-plus-circle"></i> Add</button>
        </div>
    </div>

    <!-- Silver Entry -->
    <div class="entry-area mb-4">
        <h4><i class="fas fa-coins"></i> Add Silver</h4>
        <div class="input-group">
            <input type="number" id="silverWeight" class="form-control" placeholder="Weight in grams">
            <button class="btn btn-secondary" onclick="addSilver()"><i class="fas fa-plus-circle"></i> Add</button>
        </div>
    </div>

    <!-- List Display -->
    <div class="list-area mb-4">
        <h4><i class="fas fa-list"></i> Added Items</h4>
        <ul id="assetList" class="list-group mb-2"></ul>
        <ul id="goldList" class="list-group mb-2"></ul>
        <ul id="silverList" class="list-group"></ul>
    </div>

    <!-- Calculate & Reset Buttons -->
    <button class="btn btn-primary w-100 mb-2" onclick="calculateZakat()"><i class="fas fa-calculator"></i> Calculate Zakat</button>
    <button class="btn btn-danger w-100 mb-2" onclick="resetForm()"><i class="fas fa-redo-alt"></i> Reset</button>
    <button class="btn btn-dark w-100" onclick="printResult()"><i class="fas fa-print"></i> Print</button>

    <!-- Result Display -->
    <div id="result" class="mt-3"></div>

    <script>
        let assets = [], goldItems = [], silverItems = [];

        async function getExchangeRate(base, target) {
            const apiKey = "YOUR_API_KEY";
            const url = `https://api.exchangerate-api.com/v4/latest/${base}`;
            try {
                let response = await fetch(url);
                let data = await response.json();
                return data.rates[target] || 1;
            } catch (error) {
                console.error("Exchange rate fetch error:", error);
                return 1;
            }
        }

        function addAsset() {
            let type = document.getElementById("assetType").value;
            let amount = parseFloat(document.getElementById("assetAmount").value);
            let currency = document.getElementById("assetCurrency").value;

            if (type && amount > 0) {
                assets.push({ type, amount, currency });
                updateList("assetList", assets, "fa-coins", deleteAsset);
            }
        }

        function addGold() {
            let weight = parseFloat(document.getElementById("goldWeight").value);
            let carat = parseInt(document.getElementById("goldCarat").value);
            if (weight > 0) {
                let pureGold = (weight * carat) / 24;
                let zakatableGold = pureGold * 0.025;
                goldItems.push({ weight, pureGold, zakatableGold });
                updateList("goldList", goldItems, "fa-ring", deleteGold);
            }
        }

        function addSilver() {
            let weight = parseFloat(document.getElementById("silverWeight").value);
            if (weight > 0) {
                let zakatableSilver = weight * 0.025;
                silverItems.push({ weight, zakatableSilver });
                updateList("silverList", silverItems, "fa-coins", deleteSilver);
            }
        }

        function updateList(elementId, items, icon, deleteFunc) {
            let list = document.getElementById(elementId);
            list.innerHTML = items.map((item, index) =>
                `<li class="list-group-item">
                    <i class="fas ${icon}"></i> ${JSON.stringify(item)}
                    <button class="btn btn-sm btn-danger" onclick="(${deleteFunc})(${index})">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </li>`
            ).join('');
        }

        async function calculateZakat() {
            let mainCurrency = document.getElementById("mainCurrency").value;
            let totalCash = 0, totalZakatCash = 0;
            let totalGold = goldItems.reduce((sum, item) => sum + item.zakatableGold, 0);
            let totalSilver = silverItems.reduce((sum, item) => sum + item.zakatableSilver, 0);

            for (let asset of assets) {
                let rate = await getExchangeRate(asset.currency, mainCurrency);
                totalCash += asset.amount * rate;
            }
            totalZakatCash = totalCash * 0.025;

            document.getElementById("result").innerHTML = `<strong>Total Zakat:</strong> ${totalZakatCash.toFixed(2)} ${mainCurrency}`;
        }

        function resetForm() { assets = []; goldItems = []; silverItems = []; calculateZakat(); }
        function printResult() { window.print(); }

    </script>
</body>
</html>
